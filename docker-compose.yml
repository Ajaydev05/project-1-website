version: "3.8"

services:
 db:
  image: mongo:6
  container_name: mongodb
  volumes: 
   - ./mongodata:/data/db
  networks:
   - app-network
 backend:
  build: ./backend
  container_name: backend
  depends_on:
   - db
  environment:
     - MONGO_URI=mongodb://db:27017/
  networks:
   - app-network
 frontend:
  build: ./frontend
  container_name: frontend
  networks:
   - app-network
 nginx:
  image: nginx:alpine
  container_name: nginx
   depends_on:
      - frontend
      - backend
  volumes:
   - ./nginx:/etc/nginx/conf.d
  ports:
   - "80:80"
  networks:
   - app-network
networks: 
 app-network:
  driver: bridge




